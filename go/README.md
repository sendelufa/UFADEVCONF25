# Введение

Go-версия учебного проекта повторяет пример Value Object из раздела Java. Здесь доменная модель доставки реализована на Go 1.22 с разделением по слоям DDD/Clean Architecture. Центральный VO — `Weight` (`internal/domain/weight.go`), который хранит вес в граммах, валидирует вход, умеет переводить килограммы в граммы и предоставляет удобные проверки диапазонов. Архитектура повторяет исходный пример:

- `internal/domain` — доменные объекты (`Weight`, `Parcel`, `PickupPoint`) и интерфейс репозитория.
- `internal/application` — сервис прикладного слоя и DTO-команды/запросы.
- `internal/infrastructure` — HTTP-адаптер и in-memory репозиторий + точка входа `cmd/server`.

# Начало работы

## Требования

- Go 1.22+

## Сборка и тесты

```bash
go test ./...
```

Тесты находятся в `internal/domain` и покрывают ключевую бизнес-логику.

## Запуск HTTP API

```bash
go run ./cmd/server
```

Сервис поднимается на `http://localhost:8080`.

# REST API

## Создать пункт выдачи

- **POST** `/api/pickup-points`
- Тело запроса:

```json
{
  "code": "SPB-101",
  "address": "Санкт-Петербург, Невский проспект, 1",
  "minWeightKg": 1.0,
  "maxWeightKg": 5.0
}
```

## Проверить, помещается ли отправление

- **POST** `/api/pickup-points/{code}/fit-check`
- Тело запроса:

```json
{
  "trackingNumber": "TRACK-1",
  "contentsDescription": "Документы",
  "parcelWeightGrams": 2300
}
```

Ответ содержит `fits=true/false` и идентификатор пункта выдачи.

> Примечание: значения веса в килограммах принимаются только при создании пункта выдачи. HTTP-адаптер переводит их во внутренние граммы через VO `Weight`.

# Архитектура

- **Domain** — чистый Go-пакет без зависимостей от инфраструктуры; содержит VO, сущности и контракт `PickupPointRepository`.
- **Application** — `PickupPointApplicationService` с DTO-командами/запросами/ответами и ошибкой `ErrPickupPointNotFound`.
- **Infrastructure** — минимальный HTTP-сервер на стандартной библиотеке, JSON-обработчики запросов, глобальный обработчик ошибок и in-memory репозиторий.

Такая структура позволяет переносить доменную логику в любое окружение, меняя только инфраструктурный слой.
